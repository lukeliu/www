<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <title>國立臺灣大學醫學院附設醫院新竹臺大分院</title>
    <meta content="" name="descriptison">
    <meta content="" name="keywords">

    <!-- Favicons -->
    <link href="images/favicon.png" rel="icon">
    <link href="images/favicon.png" rel="apple-touch-icon">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@100;500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/vendor/animate.css/animate.min.css" rel="stylesheet">
    <link href="assets/vendor/icofont/icofont.min.css" rel="stylesheet">
    <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
    <link href="assets/vendor/aos/aos.css" rel="stylesheet">

    <!-- Template Main CSS File -->
    <link href="assets/css/custom.css" rel="stylesheet">
</head>

<body class="academy_history">

    <!-- ======= Header ======= -->
    <header id="header">
        <button type="button" class="mobile-nav-toggle d-lg-none"><i class="bx bx-menu"></i></button>
        <div class="container full">

            <div class="row no-gutters">
                <div class="col-6">
                    <div class="logo">
                        <img src="images/logo.png" alt="國立臺灣大學醫學院附設醫院新竹台大分院" class="img-fluid">
                        <a href="index.html" data-storke="回首頁">回首頁</a>
                    </div>
                </div>
                <div class="col-6">
                    <nav class="nav-menu d-none d-lg-block">
                        <ul>
                            <li class="m_show"><a href="index.html" data-storke="回首頁">回首頁</a></li>
                            <li><a href="successive_deans.html" data-storke="歷任院長">歷任院長</a></li>
                            <li class="active"><a href="academy_history.html" data-storke="新竹臺大分院歷史沿革">新竹臺大分院歷史沿革</a></li>
                        </ul>
                    </nav>
                </div>
                <div class="col-12 h_title"><img class="img-fluid" data-aos="fade-up" src="images/h_title5.png" alt=""></div>
            </div>

        </div>
    </header>
    <!-- End Header -->

    <main id="main" class="">

        <!-- ======= History Section ======= -->
        <section class="History p-0">
            <div class="container full">

                <div class="position-relative">
                    <div class="btns">
                        <div class="btn line_1" item="item1">新竹醫院</div>
                        <div class="btn line_2" item="item2">竹東醫院</div>
                        <div class="btn line_3" item="item3">生醫園區分院</div>
                        <div class="btn line_4" item="item4">臺大分院</div>
                    </div>
                    <div id="history2">
                        <div id="svgAll2"><svg class="connection-svg"></svg></div>

                        <div id="item1" class="otime2 ot01"><span>1895年成立</span></div>
                        <div class="hinfo" num="1">
                            <h3>新竹醫院</h3>
                            <img class="img-fluid" src="images/ah_img1.jpg" alt="">
                        </div>
                        <div class="otime2 ot02"><span>1945年</span></div>
                        <div class="hinfo" num="2">
                            <h3>臺灣省立<br>新竹醫院</h3>
                            <img class="img-fluid" src="images/ah_img2.jpg" alt="">
                        </div>
                        <div class="otime2 ot03"><span>1999年7月1日改制</span></div>
                        <div class="hinfo" num="3">
                            <h3>行政院衛生署<br>新竹醫院</h3>
                            <img class="img-fluid" src="images/ah_img3.jpg" alt="">
                        </div>
                        <div class="otime2 ot04"><span>2011年7月1日</span></div>
                        <div class="hinfo" num="4">
                            <h3>國立臺灣大學<br>醫學院附設醫院<br>新竹分院</h3>
                            <img class="img-fluid" src="images/ah_img4.jpg" alt="">
                        </div>

                        <div id="item2" class="otime2 ot05"><span>1993年7月1日</span></div>
                        <div class="hinfo" num="5">
                            <h3>臺灣省立<br>竹東醫院</h3>
                            <img class="img-fluid" src="images/ah_img5.jpg" alt="">
                        </div>
                        <div class="otime2 ot06"><span>1999年7月1日改制</span></div>
                        <div class="hinfo" num="6">
                            <h3>行政院衛生署<br>竹東醫院</h3>
                            <img class="img-fluid" src="images/ah_img6.jpg" alt="">
                        </div>
                        <div class="otime2 ot07"><span>2011年7月1日</span></div>
                        <div class="hinfo" num="7">
                            <h3>國立臺灣大學<br>醫學院附設醫院<br>竹東分院</h3>
                            <img class="img-fluid" src="images/ah_img7.jpg" alt="">
                        </div>

                        <div id="item3" class="otime2 ot08"><span>2019年12月16日</span></div>
                        <div class="hinfo" num="8">
                            <h3>國立臺灣大學<br>醫學院附設醫院<br>生醫園區分院</h3>
                            <img class="img-fluid" src="images/ah_img8.jpg" alt="">
                        </div>

                        <div id="item4" class="otime2 ot09"><span>2021年1月1日 三院區整併</span></div>
                        <div class="otime2 ot10"><span>國立臺灣大學醫學院附設醫院 新竹臺大分院</span></div>
                        <div class="hinfo" num="9">
                            <h3>新竹醫院</h3>
                            <img class="img-fluid" src="images/ah_img9.jpg" alt="">
                        </div>
                        <div class="hinfo" num="10">
                            <h3>生醫醫院</h3>
                            <div class="htitle ht1">竹東院區</div>
                            <div class="htitle ht2">竹北院區</div>
                            <img class="img-fluid" src="images/ah_img10.jpg" alt="">
                        </div>
                        <div class="remark">
                            <p>註：新竹臺大分院為一個機關(員額及分基金整併)，設立兩個醫療機構(各有負責人)，<br><i>&nbsp;</i>名稱為新竹醫院及生醫醫院(含竹北院區及竹東院區)。</p>
                        </div>
                    </div>
                </div>
            </div>
                <div class="bg3"><img src="images/btm_bg1.jpg" class="img-fluid" alt=""></div>

        </section>
        <!-- End History Section -->

    </main>
    <!-- End #main -->

    <!-- ======= Footer ======= -->
    <footer id="footer">
        <div class="footer-top">
            <div class="container full">
                <div class="row no-gutters justify-content-center">

                    <div class="col-xl-5 col-md-9">
                        <div class="footer-info">
                            <a href="https://www.hch.gov.tw/" target="_blank"><img class="logo_td" data-aos="fade-right" src="images/logo.png" alt="國立臺灣大學醫學院附設醫院新竹臺大分院"></a>
                            <h3>國立臺灣大學醫學院<br class="m_show">附設醫院新竹臺大分院</h3>
                            <p>地址：302058新竹縣竹北市生醫路一段2號</p>
                            <p>新竹醫院：300195新竹市經國路一段442巷25號</p>
                            <p>生醫醫院竹北院區：302058新竹縣竹北市生醫路一段2號</p>
                            <p>生醫醫院竹東院區：310402新竹縣竹東鎮至善路52號</p>
                        </div>
                    </div>
                    <div class="col-xl-6 footer-links">
                        <div class="row no-gutters justify-content-center">
                            <div class="footer-link">
                                <h4>
                                    <a href="successive_deans.html">歷任院長</a>
                                </h4>
                            </div>
                            <div class="footer-link">
                                <h4>
                                    <a class="active" href="academy_history.html">新竹臺大分院歷史沿革</a>
                                </h4>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- End Footer -->

    <a href="#" class="back-to-top"><i class="icofont-simple-up"></i></a>

    <!-- Vendor JS Files -->
    <script src="assets/vendor/jquery/jquery.min.js"></script>
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendor/jquery.easing/jquery.easing.min.js"></script>
    <script src="assets/vendor/aos/aos.js"></script>
    <script src="assets/js/jquery.niceScroll.min.js"></script>

    <!-- Template Main JS File -->
    <script src="assets/js/main.js"></script>
    <script>
        // 核心連線生成函數
        function connectionLines(containerSelector, selector1, selector2, Line, style, i) {
            const $container = $(containerSelector);
            const $container2 = $('#svgAll2');
            const $el1 = $(selector1);
            const $el2 = $(selector2);
            
            // SVG容器
            const $svg = $('#svgAll2 .connection-svg');
            //$container2.append($svg);

            // 獲取元素中心座標（相對容器）
            function getElementCenter($el) {
                const containerOffset = $container.offset();
                const elOffset = $el.offset();
                const containerLeft = containerOffset.left;
                const containerTop = containerOffset.top;
                const elLeft = elOffset.left;
                const elTop = elOffset.top;
                const elWidth = $el.outerWidth();
                const elHeight = $el.outerHeight();
                
                // 計算相對容器的坐標
                console.log(elLeft);
                let elX = (elLeft - containerLeft) + elWidth / 2;
                if (i == 5) {
                    elX = (elLeft - containerLeft) + elWidth / 4; // 錯開疊線
                }
                if (i == 6) {
                    elX = (elLeft - containerLeft) + elWidth / 1.35; // 錯開疊線
                }
                const elY = (elTop - containerTop) + elHeight / 2;
                
                return { x: elX, y: elY };
            }

            // 繪製所有連線
            function drawAllLines() {
                //$svg.empty(); // 清空原有連線
                const center1 = getElementCenter($el1);
                const center2 = getElementCenter($el2);

                // 創建SVG路徑的工具函數
                function createPath(d) {
                    const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
                    path.setAttribute("d", d);
                    path.setAttribute("id", "p-"+i);
                    path.setAttribute("class", Line);
                    return path;
                }

                var path1;

                switch(style) {
                    case 'hv':
                        // 先橫後豎
                        path1 = createPath(`M ${center1.x} ${center1.y} H ${center2.x} V ${center2.y}`);
                        break;
                        
                    case 'vh':
                        // 先豎後橫
                        path1 = createPath(`M ${center1.x} ${center1.y} V ${center2.y} H ${center2.x}`);
                        break;
                        
                    case 'hvh':
                        // 先橫後豎再橫（中間中轉點）
                        var midX1 = (center1.x + center2.x) / 2;
                        path1 = createPath(`M ${center1.x} ${center1.y} H ${midX1} V ${center2.y} H ${center2.x}`);
                        break;
                        
                    case 'vhv':
                        // 先豎後橫再豎（中間中轉點）
                        var midY1 = (center1.y + center2.y) / 2;
                        path1 = createPath(`M ${center1.x} ${center1.y} V ${midY1} H ${center2.x} V ${center2.y}`);
                        break;
                }

                // 添加所有路徑到SVG
                //console.log(path1);
                $svg.append(path1);
            }

            // 初始化繪製
            drawAllLines();
        }

        $(function() {
            $('.btns .btn').click(function() {
                let hid = $(this).attr('item');
                let htop = $('#'+hid).offset();
                $('html, body').animate({
                    scrollTop: htop.top - 60
                }, 1500, 'easeInOutExpo');
                return false;
            });

            $(window).on('load resize', function() {
                var winW = $(this).width();
                $('#svgAll2 .connection-svg path').remove();
                if(winW < 1670){
                    connectionLines('#history2', '#item1', '.ot04', 'line1', 'vh', 1);
                    connectionLines('#history2', '#item2', '.ot07', 'line2', 'vh', 2);
                    connectionLines('#history2', '#item3', '#item4', 'line3', 'vh', 3);
                    connectionLines('#history2', '#item4', '.ot10', 'line4', 'vh', 4);
                    connectionLines('#history2', '.hinfo[num="9"]', '.ot10', 'line4', 'vh', 5);
                    connectionLines('#history2', '.hinfo[num="10"]', '.ot10', 'line7', 'vh', 6);
                    connectionLines('#history2', '.hinfo[num="4"]', '#item4', 'line5', 'vh', 5);
                    connectionLines('#history2', '.hinfo[num="7"]', '#item4', 'line6', 'vh', 6);
                }
            });
        });
    </script>

</body>

</html>